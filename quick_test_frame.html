<!DOCTYPE html>
<html>
<head>
    <title>Quick Frame Test</title>
</head>
<body>
    <h1>Quick Frame Test</h1>
    <img id="test-image" style="width: 300px; height: 200px; border: 1px solid red;" alt="Test frame">
    <div id="log"></div>

    <script>
        async function testFrame() {
            try {
                const response = await fetch('http://127.0.0.1:5000/api/frame');
                const data = await response.json();
                
                document.getElementById('log').innerHTML = `
                    <p>Success: ${data.success}</p>
                    <p>HasFrame: ${data.hasFrame}</p>
                    <p>FrameData Length: ${data.frameData ? data.frameData.length : 'null'}</p>
                    <p>FrameData Prefix: ${data.frameData ? data.frameData.substring(0, 50) : 'null'}</p>
                `;
                
                if (data.hasFrame && data.frameData) {
                    const img = document.getElementById('test-image');
                    img.src = data.frameData;
                    img.onload = () => console.log('✅ Image loaded successfully');
                    img.onerror = (e) => console.error('❌ Image failed to load:', e);
                }
            } catch (error) {
                document.getElementById('log').innerHTML = `Error: ${error.message}`;
            }
        }
        
        // Test immediately and then every 2 seconds
        testFrame();
        setInterval(testFrame, 2000);
    </script>
</body>
</html>
